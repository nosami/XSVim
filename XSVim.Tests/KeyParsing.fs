namespace XSVim.Tests
open XSVim
open NUnit.Framework

[<TestFixture>]
module ``Key parsing tests`` =
    let test keys =
        let keys = [for c in keys -> c.ToString()]
        let state = { Vim.defaultState with keys=keys }
        let editor = MonoDevelop.Ide.Editor.TextEditorFactory.CreateNewEditor()
        let action, _state = Vim.parseKeys state editor
        let first = action.Head

        first.repeat, first.commandType, first.textObject

    [<Test>]
    let ``10j``() =
        test "10j" |> should equal (Some 10, Move, Down)

    [<Test>]
    let ``11G``() =
        test "11G" |> should equal (Some 1, Move, Jump (StartOfLineNumber 11))
